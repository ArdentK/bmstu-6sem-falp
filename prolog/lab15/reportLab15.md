# Формирование эффективных программ на Prolog

## Задание

В одной программе написать правила, позволяющие найти

1. Максимум из двух чисел
   1. без использования отсечения,
   2. с использованием отсечения;
2. Максимум из трех чисел
   1. без использования отсечения,
   2. с использованием отсечения;

Убедиться в правильности результатов. Для каждого случая пункта 2 обосновать необходимость всех условий тела. Для одного из вариантов ВОПРОСА и каждого варианта задания 2 составить таблицу, отражающую конкретный порядок работы системы:

## Код программы

```prolog
include "lab15.inc"

domains
    num = integer

predicates
    max2(num, num, num)
    max3(num, num, num, num)

    max2clipping(num, num, num)
    max3clipping(num, num, num, num)

clauses
    % #1 a
    max2(N1, N2, N2) :- N2 >= N1.
    max2(N1, N2, N1) :- N1 >= N2.
    % #1 b
    max2clipping(N1, N2, N2) :- N2 >= N1, !.
    max2clipping(N1, _, N1).
    % #2 a
    max3(N1, N2, N3, N3) :- N3 >= N1, N3 >= N2.
    max3(N1, N2, N3, N2) :- N2 >= N1, N2 >= N3.
    max3(N1, N2, N3, N1) :- N1 >= N2, N1 >= N3.
    % #2 b
    max3clipping(N1, N2, N3, N3) :- N3 >= N2, N3 >= N1, !.
    max3clipping(N1, N2, _, N1) :- N1 >= N2, !.
    max3clipping(_, N2, _, N2).

goal
    %max2(1, -10, Max).
        %Max=1
        %1 Solution
    %max2clipping(1, 1050, Max).
        %Max=1050
        %1 Solution
    %max3(-100, 4, 5, Max).
        %Max=5
        %1 Solution
    max3clipping(-100, 4, 5, Max).
        %Max=5
        %1 Solution
```

## Словесное описание порядка ответа на вопрос

|№ шага|Состояние резольвенты, и вывод: дальнейшие действия (почему?)|Для каких термов запускается алгоритм унификации: Т1=Т2 и каков результат (и подстановка)| Дальнейшие действия: прямой ход или откат (почему и к чему приводит?)|
|:---|:---|:---|:---|
|1|max3(-100, 4, 5, Max)| Сравнение: max3(-100, 4, 5, Max) = max2(N1, N2, N2). </br> Унификация неуспешна (несовпадение функторов)| Прямой ход, переход к следующему предложению |
|2-4|...|...|...|
|5|5 >= -100 </br>5 >= 4|Сравнение: max3(-100, 4, 5, Max) = max3(N1, N2, N3, N3). Унификация успешна. </br> Подстановка: {N1=-100, N2=4, N3=5, Max=N3}|Прямой ход, переход к следующему предложению|
|6|5 >= 4| Сравнение: 5 >= -100. Правда. |Прямой ход, редукция резольвенты|
|7|пустая|Сравнение: 5 >= 4. Правда.| **Вывод: Max=5**Откат относительно шага 5|
|8|4 >= 5 </br> 4 >= -100 |Сравнение: max3(-100, 4, 5, Max) = max3(N1, N2, N3, N2). Унификация успешна. Подстановка: {N1=-100, N2=4, N3=5, Max=N2}|Прямой ход, редукция резольвенты|
|9|4 >= -100|4 >= 5. Правда|Прямой ход, редукция резольвенты|
|10| max3(-100, 4, 5, Max) | 4 >= 5. Ложь | Откат, переход к следующему предложению относительно шага 8|
|11|-100 >= 4 </br>-100 >= 5|Сравнение: max3(-100, 4, 5, Max) = max3(N1, N2, N3, N1). Унификация успешна. </br> Подстановка: {N1=-100, N2=4, N3=5, Max=N1}|Прямой ход, редукция резольвенты|
|12|-100 >= 5| -100 >= 4. Ложь| Откат, переход к следующему предложению относительно шага 11|
|13|пустая|Сравнение: max3(-100, 4, 5, Max) = max3clipping(N1, N2, N3, N3) Унификация неуспешна (несовпадение функторов)| Прямой ход, переход к следующему предложению |
|14|...|...|...|
|15|пустая|Сравнение: max3(-100, 4, 5, Max) = max3clipping(N1, N2, N3, N3) Унификация неуспешна (несовпадение функторов)|Достижение конца БЗ, резольвента пуста, завершение работы. |

|№ шага|Состояние резольвенты, и вывод: дальнейшие действия (почему?)|Для каких термов запускается алгоритм унификации: Т1=Т2 и каков результат (и подстановка)| Дальнейшие действия: прямой ход или откат (почему и к чему приводит?)|
|:---|:---|:---|:---|
|1|max3clipping(-100, 4, 5, Max)|Сравнение: max3clipping(-100, 4, 5, Max) = max2(N1, N2, N2).</br> Унификация неуспешна (несовпадение функторов)| Прямой ход, переход к следующему предложению |
|2-7|...|...|...|
|8|5 >= 4 </br>5 >= -100 </br>!|Сравнение: max3clipping(-100, 4, 5, Max) = max3clipping(N1, N2, N3, N3). Унификация успешна. </br> Подстановка: {N1=-100, N2=4, N3=5, Max=N3}|Прямой ход, редукция резольвенты|
|9|5 >= -100 </br>!|5 >= 4. Правда|Прямой ход, редукция резольвенты|
|10|!|!. Отсечение|**Вывод: Max=5**. Завершение работы|
